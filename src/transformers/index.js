const inline = require('./inline')
const minify = require('./minify')
const markdown = require('./markdown')
const prettify = require('./prettify')
const ensureSixHEX = require('./six-hex')
const addURLParams = require('./url-params')
const transformContents = require('./transform')
const preventWidows = require('./prevent-widows')
const replaceStrings = require('./replace-strings')
const safeClassNames = require('./safe-class-names')
const applyBaseImageUrl = require('./base-image-url')
const removeUnusedCSS = require('./remove-unused-css')
const removeAttributes = require('./remove-attributes')
const removeInlineSizes = require('./remove-inline-sizes')
const applyExtraAttributes = require('./extra-attributes')
const removeInlineBgColor = require('./remove-inline-bgcolor')

exports.process = async (html, config) => {
  html = await safeClassNames(html, config)
  html = await transformContents(html, config)
  html = await markdown(html, config)
  html = await preventWidows(html, config)
  html = await inline(html, config)
  html = await removeUnusedCSS(html, config)
  html = await removeInlineSizes(html, config)
  html = await removeInlineBgColor(html, config)
  html = await removeAttributes(html, config)
  html = await applyExtraAttributes(html, config)
  html = await applyBaseImageUrl(html, config)
  html = await addURLParams(html, config)
  html = await ensureSixHEX(html, config)
  html = await prettify(html, config)
  html = await minify(html, config)
  html = await replaceStrings(html, config)

  return html
}
